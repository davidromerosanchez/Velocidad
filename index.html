<script>
document.addEventListener("DOMContentLoaded", () => {
    const mensaje = document.createElement("p");
    mensaje.textContent = "Comprobando conexi√≥n...";
    document.body.appendChild(mensaje);

    const inicio = performance.now();
    fetch("https://speed.hetzner.de/1MB.bin") // archivo peque√±o y confiable
        .then(res => res.blob())
        .then(() => {
            const fin = performance.now();
            const tiempo = (fin - inicio) / 1000;
            const velocidad = (1 / tiempo).toFixed(2); // MB/s
            let estado = `‚úÖ Conectado a ${velocidad} MB/s`;

            if (velocidad < 0.2) {
                estado += " ‚Äì modo metro activado üöá";
            } else if (velocidad < 1) {
                estado += " ‚Äì velocidad baja üê¢";
            } else {
                estado += " ‚Äì velocidad aceptable ‚ö°";
            }

            mensaje.textContent = estado;
        })
        .catch(() => {
            mensaje.textContent = "‚ùå Sin conexi√≥n";
        });
});
</script>
